{"version":3,"sources":["assets/js/help.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtMA;AAAA","file":"priv/dist/js/help.js","sourcesContent":["\"use strict\";\n\nvar _perfectScrollbar = require(\"perfect-scrollbar\");\n\nvar _perfectScrollbar2 = _interopRequireDefault(_perfectScrollbar);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction registerCodeSection($codeSection) {\n    var $li = $codeSection.find(\"ul.nav li\");\n    var $blocks = $codeSection.find(\".blocks div\");\n\n    $li.click(function () {\n        var language = this.dataset.language;\n\n        $li.removeClass(\"active\");\n        $li.filter(\"[data-language=\" + language + \"]\").addClass(\"active\");\n\n        $blocks.removeClass(\"active\");\n        $blocks.filter(\"[data-language=\" + language + \"]\").addClass(\"active\");\n    });\n\n    $li.eq(0).click();\n}\n\nfunction highlight_current_article() {\n    $('.help .sidebar a').removeClass('highlighted');\n    var path = window.location.href.match(/\\/(help|api)\\/.*/);\n\n    if (!path) {\n        return;\n    }\n    console.log('path', path, path[0]);\n    var article = $('.help .sidebar a[href=\"' + path[0] + '\"]');\n    article.addClass('highlighted');\n}\n\nfunction adjust_mac_shortcuts() {\n    var keys_map = new Map([['Backspace', 'Delete'], ['Enter', 'Return'], ['Home', 'Fn + ⇽'], ['End', 'Fn + ⇾'], ['PgUp', 'Fn + ↑'], ['PgDn', 'Fn + ↓']]);\n\n    $(\".markdown .content code\").each(function () {\n        var text = $(this).text();\n\n        if (!keys_map.has(text)) {\n            return;\n        }\n\n        var key_string = keys_map.get(text);\n        var keys = key_string.match(/[^\\s\\+]+/g);\n\n        _.each(keys, function (key) {\n            key_string = key_string.replace(key, '<code>' + key + '</code>');\n        });\n\n        $(this).replaceWith(key_string);\n    });\n}\n\nfunction render_code_sections() {\n    $(\".code-section\").each(function () {\n        registerCodeSection($(this));\n    });\n\n    highlight_current_article();\n\n    if (/Mac/i.test(navigator.userAgent)) {\n        adjust_mac_shortcuts();\n    }\n}\n\nfunction scrollToHash(container) {\n    var hash = window.location.hash;\n    if (hash !== '') {\n        container.scrollTop = $(hash).position().top - $('.markdown .content').position().top;\n    } else {\n        container.scrollTop = 0;\n    }\n}\n\n(function () {\n    var html_map = {};\n    var loading = {\n        name: null\n    };\n\n    var fetch_page = function fetch_page(path, callback) {\n        $.get(path, function (res) {\n            var $html = $(res).find(\".markdown .content\");\n            $html.find(\".back-to-home\").remove();\n\n            callback($html.html().trim());\n            render_code_sections();\n        });\n    };\n\n    var markdownPS = new _perfectScrollbar2.default($(\".markdown\")[0], {\n        suppressScrollX: true,\n        useKeyboard: false,\n        wheelSpeed: 0.68,\n        scrollingThreshold: 50\n    });\n\n    new _perfectScrollbar2.default($(\".sidebar\")[0], {\n        suppressScrollX: true,\n        useKeyboard: false,\n        wheelSpeed: 0.68,\n        scrollingThreshold: 50\n    });\n\n    $(\".sidebar.slide h2\").click(function (e) {\n        var $next = $(e.target).next();\n\n        if ($next.is(\"ul\")) {\n            $next.slideToggle(\"fast\", \"swing\", function () {\n                markdownPS.update();\n            });\n        }\n    });\n\n    $(\".sidebar a\").click(function (e) {\n        var path = $(this).attr(\"href\");\n        var path_dir = path.split('/')[1];\n        var current_dir = window.location.pathname.split('/')[1];\n\n        // Do not block redirecting to external URLs\n        if (path_dir !== current_dir) {\n            return;\n        }\n\n        var container = $(\".markdown\")[0];\n\n        if (loading.name === path) {\n            return;\n        }\n\n        history.pushState({}, \"\", path);\n\n        if (html_map[path]) {\n            $(\".markdown .content\").html(html_map[path]);\n            markdownPS.update();\n            render_code_sections();\n            scrollToHash(container);\n        } else {\n            loading.name = path;\n\n            fetch_page(path, function (res) {\n                html_map[path] = res;\n                $(\".markdown .content\").html(html_map[path]);\n                loading.name = null;\n                markdownPS.update();\n                scrollToHash(container);\n            });\n        }\n\n        $(\".sidebar\").removeClass(\"show\");\n\n        e.preventDefault();\n    });\n\n    // Show Guides user docs in sidebar by default\n    $('.help .sidebar h2#guides + ul').css('display', 'block');\n\n    // Remove ID attributes from sidebar links so they don't conflict with index page anchor links\n    $('.help .sidebar h1, .help .sidebar h2, .help .sidebar h3').removeAttr('id');\n\n    // Scroll to anchor link when clicked\n    $('.markdown .content h1, .markdown .content h2, .markdown .content h3').on('click', function () {\n        window.location.href = window.location.href.replace(/#.*/, '') + '#' + $(this).attr(\"id\");\n    });\n\n    window.onresize = function () {\n        markdownPS.update();\n    };\n\n    window.addEventListener(\"popstate\", function () {\n        var path = window.location.pathname;\n        $(\".markdown .content\").html(html_map[path]);\n    });\n\n    $(\".hamburger\").click(function () {\n        $(\".sidebar\").toggleClass(\"show\");\n    });\n\n    $(\".markdown\").click(function () {\n        if ($(\".sidebar.show\").length) {\n            $(\".sidebar.show\").toggleClass(\"show\");\n        }\n    });\n\n    render_code_sections();\n\n    // Finally, make sure if we loaded a window with a hash, we scroll\n    // to the right place.\n    var container = $(\".markdown\")[0];\n    scrollToHash(container);\n    // function init() {}\n    // module.exports = init;\n})();\n"]}